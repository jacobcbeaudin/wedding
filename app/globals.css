@import 'tailwindcss';

@plugin 'tailwindcss-animate';
@plugin '@tailwindcss/typography';

@custom-variant dark (&:is(.dark *));

@theme {
  --radius-lg: 0.5625rem;
  --radius-md: 0.375rem;
  --radius-sm: 0.1875rem;

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-card-border: hsl(var(--card-border));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-popover-border: hsl(var(--popover-border));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-primary-border: var(--primary-border);

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-secondary-border: var(--secondary-border);

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-muted-border: var(--muted-border);

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-accent-border: var(--accent-border);

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-destructive-border: var(--destructive-border);

  --color-ring: hsl(var(--ring));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --color-sidebar-ring: hsl(var(--sidebar-ring));
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));

  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-primary-border: var(--sidebar-primary-border);

  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-accent-border: var(--sidebar-accent-border);

  --color-status-online: rgb(34 197 94);
  --color-status-away: rgb(245 158 11);
  --color-status-busy: rgb(239 68 68);
  --color-status-offline: rgb(156 163 175);

  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);
  --font-mono: var(--font-mono);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility fade-in-up {
  /* Coastal Luxury Styles */
  animation: fadeInUp 0.6s ease-out;
}
@utility elegant-serif {
  font-family: Forum, serif;
}
@utility script-font {
  font-family: 'Great Vibes', cursive;
}
@utility letter-spacing-wide {
  letter-spacing: 0.1em;
}
@utility coastal-shadow {
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.02),
    0 4px 20px rgba(120, 160, 180, 0.12);
}
@utility soft-shadow {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}
@utility no-default-hover-elevate {
  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of
   * buttons/badges can remove the automatic brightness adjustment on interactions
   * and program their own. */
  --no-default-hover-elevate: 1;
}
@utility toggle-elevate {
  /**
   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.
   * This way they can stack/compound. Both will overlap the parent's borders!
   * So borders will be automatically adjusted both on toggle, and hover/active,
   * and they will be compounded.
   */
  &::before {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: -1;
    /* sits behind content but above backdrop */
  }

  &.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  &.border::before {
    inset: -1px;
  }
}
@utility toggle-elevate-2 {
  &::before {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: -1;
    /* sits behind content but above backdrop */
  }
}
@utility toggle-elevated {
  &.toggle-elevate::before {
    background-color: var(--elevate-2);
  }
}
@utility border {
  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  &.toggle-elevate::before {
    inset: -1px;
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  &.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
  &.active-elevate:not(.no-active-interaction-elevate)::after {
    inset: -1px;
  }
  &.hover-elevate-2:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
  &.active-elevate-2:not(.no-active-interaction-elevate)::after {
    inset: -1px;
  }
  &.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
}
@utility hover-elevate {
  /* Does not work on elements with overflow:hidden! */
  &:not(.no-default-hover-elevate) {
    position: relative;
    z-index: 0;
  }

  &:not(.no-default-hover-elevate)::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  &:hover:not(.no-default-hover-elevate)::after {
    background-color: var(--elevate-1);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  &.border:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
  & .border:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
}
@utility active-elevate {
  &:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  &:not(.no-default-active-elevate)::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  &:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }
  & .border:not(.no-active-interaction-elevate)::after {
    inset: -1px;
  }
}
@utility hover-elevate-2 {
  &:not(.no-default-hover-elevate) {
    position: relative;
    z-index: 0;
  }

  &:not(.no-default-hover-elevate)::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  &:hover:not(.no-default-hover-elevate)::after {
    background-color: var(--elevate-2);
  }
  & .border:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
}
@utility active-elevate-2 {
  &:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  &:not(.no-default-active-elevate)::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  &:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }
  & .border:not(.no-active-interaction-elevate)::after {
    inset: -1px;
  }
}

@layer utilities {
  /* LIGHT MODE - Modern Coastal Theme */
  :root {
    --button-outline: rgba(0, 0, 0, 0.06);
    --badge-outline: rgba(0, 0, 0, 0.04);
    --opaque-button-border-intensity: -6;
    --elevate-1: rgba(0, 0, 0, 0.02);
    --elevate-2: rgba(0, 0, 0, 0.05);
    --background: 200 20% 98%;
    --foreground: 210 25% 15%;
    --border: 200 12% 88%;
    --card: 200 15% 99%;
    --card-foreground: 210 25% 15%;
    --card-border: 200 12% 90%;
    --sidebar: 200 15% 96%;
    --sidebar-foreground: 210 25% 15%;
    --sidebar-border: 200 12% 88%;
    --sidebar-primary: 200 35% 52%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 200 15% 92%;
    --sidebar-accent-foreground: 210 25% 15%;
    --sidebar-ring: 200 35% 52%;
    --popover: 0 0% 100%;
    --popover-foreground: 210 25% 15%;
    --popover-border: 200 12% 88%;
    --primary: 200 35% 52%;
    --primary-foreground: 0 0% 100%;
    --secondary: 200 12% 94%;
    --secondary-foreground: 210 25% 15%;
    --muted: 200 10% 92%;
    --muted-foreground: 210 12% 45%;
    --accent: 200 15% 92%;
    --accent-foreground: 210 25% 15%;
    --destructive: 0 65% 50%;
    --destructive-foreground: 0 0% 100%;
    --input: 200 12% 90%;
    --ring: 200 35% 52%;
    --chart-1: 200 35% 52%;
    --chart-2: 195 25% 65%;
    --chart-3: 185 20% 60%;
    --chart-4: 205 20% 62%;
    --chart-5: 190 28% 58%;
    --font-sans: Forum, serif;
    --font-serif: Forum, serif;
    --font-mono: Menlo, monospace;
    --radius: 0.5rem;
    --shadow-2xs: 0px 2px 0px 0px hsl(210 6% 12% / 0);
    --shadow-xs: 0px 2px 0px 0px hsl(210 6% 12% / 0);
    --shadow-sm: 0px 2px 0px 0px hsl(210 6% 12% / 0), 0px 1px 2px -1px hsl(210 6% 12% / 0);
    --shadow: 0px 2px 0px 0px hsl(210 6% 12% / 0), 0px 1px 2px -1px hsl(210 6% 12% / 0);
    --shadow-md: 0px 2px 0px 0px hsl(210 6% 12% / 0), 0px 2px 4px -1px hsl(210 6% 12% / 0);
    --shadow-lg: 0px 2px 0px 0px hsl(210 6% 12% / 0), 0px 4px 6px -1px hsl(210 6% 12% / 0);
    --shadow-xl: 0px 2px 0px 0px hsl(210 6% 12% / 0), 0px 8px 10px -1px hsl(210 6% 12% / 0);
    --shadow-2xl: 0px 2px 0px 0px hsl(210 6% 12% / 0);
    --tracking-normal: 0em;
    --spacing: 0.25rem;

    /* Fallback for older browsers */
    --sidebar-primary-border: hsl(var(--sidebar-primary));
    --sidebar-primary-border: hsl(
      from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --sidebar-accent-border: hsl(var(--sidebar-accent));
    --sidebar-accent-border: hsl(
      from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --primary-border: hsl(var(--primary));
    --primary-border: hsl(
      from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --secondary-border: hsl(var(--secondary));
    --secondary-border: hsl(
      from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --muted-border: hsl(var(--muted));
    --muted-border: hsl(
      from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --accent-border: hsl(var(--accent));
    --accent-border: hsl(
      from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --destructive-border: hsl(var(--destructive));
    --destructive-border: hsl(
      from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );
  }

  .dark {
    --button-outline: rgba(255, 255, 255, 0.08);
    --badge-outline: rgba(255, 255, 255, 0.04);
    --opaque-button-border-intensity: 8;
    --elevate-1: rgba(255, 255, 255, 0.03);
    --elevate-2: rgba(255, 255, 255, 0.07);
    --background: 205 25% 12%;
    --foreground: 200 15% 92%;
    --border: 205 18% 22%;
    --card: 205 22% 14%;
    --card-foreground: 200 15% 92%;
    --card-border: 205 18% 20%;
    --sidebar: 205 25% 13%;
    --sidebar-foreground: 200 15% 92%;
    --sidebar-border: 205 18% 22%;
    --sidebar-primary: 200 40% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 205 20% 22%;
    --sidebar-accent-foreground: 200 15% 92%;
    --sidebar-ring: 200 40% 55%;
    --popover: 205 22% 16%;
    --popover-foreground: 200 15% 92%;
    --popover-border: 205 18% 22%;
    --primary: 200 40% 55%;
    --primary-foreground: 0 0% 100%;
    --destructive: 0 65% 50%;
    --destructive-foreground: 0 0% 100%;
    --secondary: 205 18% 22%;
    --secondary-foreground: 200 15% 92%;
    --muted: 205 15% 20%;
    --muted-foreground: 200 12% 60%;
    --accent: 205 18% 22%;
    --accent-foreground: 200 15% 92%;
    --input: 205 18% 22%;
    --ring: 200 40% 55%;
    --chart-1: 200 40% 55%;
    --chart-2: 195 30% 55%;
    --chart-3: 185 25% 50%;
    --chart-4: 205 25% 52%;
    --chart-5: 190 32% 52%;
    --shadow-2xs: 0px 2px 0px 0px hsl(210 6% 92% / 0);
    --shadow-xs: 0px 2px 0px 0px hsl(210 6% 92% / 0);
    --shadow-sm: 0px 2px 0px 0px hsl(210 6% 92% / 0), 0px 1px 2px -1px hsl(210 6% 92% / 0);
    --shadow: 0px 2px 0px 0px hsl(210 6% 92% / 0), 0px 1px 2px -1px hsl(210 6% 92% / 0);
    --shadow-md: 0px 2px 0px 0px hsl(210 6% 92% / 0), 0px 2px 4px -1px hsl(210 6% 92% / 0);
    --shadow-lg: 0px 2px 0px 0px hsl(210 6% 92% / 0), 0px 4px 6px -1px hsl(210 6% 92% / 0);
    --shadow-xl: 0px 2px 0px 0px hsl(210 6% 92% / 0), 0px 8px 10px -1px hsl(210 6% 92% / 0);
    --shadow-2xl: 0px 2px 0px 0px hsl(210 6% 92% / 0);

    /* Fallback for older browsers */
    --sidebar-primary-border: hsl(var(--sidebar-primary));
    --sidebar-primary-border: hsl(
      from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --sidebar-accent-border: hsl(var(--sidebar-accent));
    --sidebar-accent-border: hsl(
      from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --primary-border: hsl(var(--primary));
    --primary-border: hsl(
      from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --secondary-border: hsl(var(--secondary));
    --secondary-border: hsl(
      from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --muted-border: hsl(var(--muted));
    --muted-border: hsl(
      from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --accent-border: hsl(var(--accent));
    --accent-border: hsl(
      from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );

    /* Fallback for older browsers */
    --destructive-border: hsl(var(--destructive));
    --destructive-border: hsl(
      from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha
    );
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
  }
}

/**
 * Using the elevate system.
 * Automatic contrast adjustment.
 *
 * <element className="hover-elevate" />
 * <element className="active-elevate-2" />
 *
 * // Using the tailwind utility when a data attribute is "on"
 * <element className="toggle-elevate data-[state=on]:toggle-elevated" />
 * // Or manually controlling the toggle state
 * <element className="toggle-elevate toggle-elevated" />
 *
 * Elevation systems have to handle many states.
 * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)
 * - toggled or not
 * - focused or not (this is not handled with these utilities)
 *
 * Even without handling focused or not, this is six possible combinations that
 * need to be distinguished from eachother visually.
 */
@layer utilities {
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type='search']::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }
}
